(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[37],{1105:function(t,e,n){"use strict";n.r(e);var r=n(108),c=n(102),a=n(0),s=n(24),o=n(32),u=n(138),i=n(46),p=n(152),h=n(966),d=n.n(h),l=(n(1066),n(2));e.default=function(t){var e=t.history,n=Object(a.useState)(!1),h=Object(r.a)(n,2),b=h[0],f=h[1],j=Object(a.useState)([]),m=Object(r.a)(j,2),O=m[0],x=m[1],g=Object(a.useState)(0),v=Object(r.a)(g,2),k=v[0],w=v[1],y=Object(a.useState)(""),N=Object(r.a)(y,2),S=N[0],C=N[1],A=Object(a.useState)(!1),I=Object(r.a)(A,2),J=I[0],D=I[1],P=Object(a.useState)(""),T=Object(r.a)(P,2),E=T[0],F=T[1],G=Object(a.useState)(0),L=Object(r.a)(G,2),R=L[0],U=L[1],$=Object(a.useState)(""),_=Object(r.a)($,2),q=_[0],z=_[1],B=Object(s.c)((function(t){return t.user})),H=Object(s.b)(),K=function(){Object(p.i)(B.token,S).then((function(t){D(!0),o.b.success("Address saved")})).catch((function(t){console.log(t),o.b.error(t.message)}))};Object(a.useEffect)((function(){f(!0),Object(p.e)(B.token).then((function(t){f(!1);var e=t.data,n=e.products,r=e.cartTotal;x(n),w(r)})).catch((function(t){f(!1),console.log(t)}))}),[B.token]);var M=function(){Object(p.b)(E.toUpperCase(),B.token).then((function(t){console.log(t.data),t.data&&(U(t.data.totalAfterDiscount),H(Object(i.a)(!0))),t.data.err&&(z(t.data.err),H(Object(i.a)(!1)))})).catch((function(t){return console.log(t)}))},Q=function(t){z(""),F(t.target.value)};return Object(l.jsx)("div",{className:"container-fluid",children:b?Object(l.jsxs)("h4",{className:"pt-2",children:[Object(l.jsx)(c.a,{}),"Loading ..."]}):Object(l.jsxs)("div",{className:"row pt-2",children:[Object(l.jsxs)("div",{className:"col-md-6",children:[Object(l.jsx)("h4",{children:"Delivery Address"}),Object(l.jsxs)("div",{className:"mb-5",children:[Object(l.jsx)(d.a,{theme:"snow",value:S,onChange:C}),Object(l.jsx)("button",{className:"btn btn-primary btn-raised mt-2",onClick:K,children:"Save"})]}),Object(l.jsx)("h4",{children:"Got Coupon"}),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("input",{type:"text",onChange:Q,value:E,className:"form-control"}),Object(l.jsx)("button",{onClick:M,className:"btn btn-primary btn-raised mt-2",children:"Apply"})]}),q&&Object(l.jsx)("p",{className:"bg-danger p-2",children:q})]}),Object(l.jsxs)("div",{className:"col-md-6",children:[Object(l.jsx)("h4",{className:"mb-2",children:"Order Summary"}),Object(l.jsxs)("p",{children:["Products: ",O.length]}),O.map((function(t){return Object(l.jsxs)("div",{className:"row",children:[Object(l.jsxs)("p",{className:"col-md-7",children:[t.product.title," "]}),Object(l.jsxs)("p",{className:"col-md-2",children:["(",t.color," x ",t.count,")"," "]}),Object(l.jsxs)("p",{className:"col-md-1",children:["="," "]}),Object(l.jsx)("p",{className:"col-md-1",children:t.product.price*t.count})]},t._id)})),Object(l.jsxs)("p",{children:["Cart Total: ",k]}),R>0&&Object(l.jsxs)("p",{className:"bg-success p-2",children:[Object(l.jsx)("strong",{children:"Discount Applied: Total Payable: "}),"$",R]}),Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"col-md-6",children:Object(l.jsx)("button",{onClick:function(){return e.push("/payment")},disabled:!J||!O.length,className:"btn btn-primary",children:"Place Order"})}),Object(l.jsx)("div",{className:"col-md-6",children:Object(l.jsx)("button",{className:"btn btn-primary",disabled:!O.length,onClick:function(){H(Object(u.c)()),Object(p.d)(B.token).then((function(t){x([]),w(0),U(0),F(""),o.b.success("Cart is empty. Continue shopping")})).catch((function(t){return console.log(t)}))},children:"Empty Order"})})]})]})]})})}},138:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s}));var r=n(5),c=function(t){return function(e,n){e({type:r.a,payload:t}),console.log("object",n().cart),"undefined"!==typeof window&&localStorage.setItem("cart",JSON.stringify(n().cart))}},a=function(t){return function(e,n){e({type:r.g,payload:t}),console.log("object",n().cart),"undefined"!==typeof window&&localStorage.setItem("cart",JSON.stringify(n().cart))}},s=function(){return function(t){"undefined"!==typeof window&&localStorage.removeItem("cart"),t({type:r.c,payload:[]})}}},152:function(t,e,n){"use strict";n.d(e,"j",(function(){return u})),n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return p})),n.d(e,"i",(function(){return h})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return l})),n.d(e,"f",(function(){return b})),n.d(e,"g",(function(){return f})),n.d(e,"a",(function(){return j})),n.d(e,"h",(function(){return m}));var r=n(12),c=n.n(r),a=n(16),s=n(26),o=n.n(s),u=function(){var t=Object(a.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("".concat("https://git.heroku.com/tech-shop-tran.git/api","/user/cart"),{cart:e},{headers:{authtoken:n}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),i=function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("".concat("https://git.heroku.com/tech-shop-tran.git/api","/user/cart"),{headers:{authtoken:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.delete("".concat("https://git.heroku.com/tech-shop-tran.git/api","/user/cart"),{headers:{authtoken:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(a.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("".concat("https://git.heroku.com/tech-shop-tran.git/api","/user/address"),{address:n},{headers:{authtoken:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),d=function(){var t=Object(a.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("".concat("https://git.heroku.com/tech-shop-tran.git/api","/user/cart/coupon"),{name:e},{headers:{authtoken:n}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),l=function(){var t=Object(a.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("".concat("https://git.heroku.com/tech-shop-tran.git/api","/user/order"),{stripeResponse:e},{headers:{authtoken:n}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),b=function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("".concat("https://git.heroku.com/tech-shop-tran.git/api","/user/order"),{headers:{authtoken:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.get("".concat("https://git.heroku.com/tech-shop-tran.git/api","/user/wishlist"),{headers:{authtoken:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=Object(a.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("".concat("https://git.heroku.com/tech-shop-tran.git/api","/user/wishlist"),{productId:e},{headers:{authtoken:n}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),m=function(){var t=Object(a.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("".concat("https://git.heroku.com/tech-shop-tran.git/api","/user/wishlist/").concat(e),{},{headers:{authtoken:n}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}]);
//# sourceMappingURL=37.c94cbc87.chunk.js.map
(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[37],{1105:function(t,e,n){"use strict";n.r(e);var r=n(108),c=n(102),a=n(0),s=n(24),u=n(33),o=n(138),i=n(46),p=n(152),d=n(966),h=n.n(d),l=(n(1066),n(2));e.default=function(t){var e=t.history,n=Object(a.useState)(!1),d=Object(r.a)(n,2),b=d[0],f=d[1],j=Object(a.useState)([]),m=Object(r.a)(j,2),O=m[0],x=m[1],v=Object(a.useState)(0),k=Object(r.a)(v,2),y=k[0],w=k[1],g=Object(a.useState)(""),N=Object(r.a)(g,2),S=N[0],C=N[1],A=Object(a.useState)(!1),P=Object(r.a)(A,2),I=P[0],J=P[1],D=Object(a.useState)(""),E=Object(r.a)(D,2),T=E[0],B=E[1],F=Object(a.useState)(0),G=Object(r.a)(F,2),L=G[0],R=G[1],U=Object(a.useState)(""),$=Object(r.a)(U,2),_=$[0],q=$[1],z=Object(s.c)((function(t){return t.user})),H=Object(s.b)(),K=function(){Object(p.i)(z.token,S).then((function(t){J(!0),u.b.success("Address saved")})).catch((function(t){console.log(t),u.b.error(t.message)}))};Object(a.useEffect)((function(){f(!0),Object(p.e)(z.token).then((function(t){f(!1);var e=t.data,n=e.products,r=e.cartTotal,c=e.orderedBy;x(n),w(r),C(c.address)})).catch((function(t){f(!1),console.log(t)}))}),[z.token]);var M=function(){Object(p.b)(T.toUpperCase(),z.token).then((function(t){t.data&&(R(t.data.totalAfterDiscount),H(Object(i.a)(!0))),t.data.err&&(q(t.data.err),H(Object(i.a)(!1)))})).catch((function(t){return console.log(t)}))},Q=function(t){q(""),B(t.target.value)};return Object(l.jsx)("div",{className:"container-fluid",children:b?Object(l.jsxs)("h4",{className:"pt-2",children:[Object(l.jsx)(c.a,{}),"Loading ..."]}):Object(l.jsxs)("div",{className:"row pt-2",children:[Object(l.jsxs)("div",{className:"col-md-6",children:[Object(l.jsx)("h4",{children:"Delivery Address"}),function(){var t=""===S.replace(/<[^>]+>/g,"");return Object(l.jsxs)("div",{className:"mb-5",children:[Object(l.jsx)(h.a,{theme:"snow",formats:"bold",value:S,onChange:C}),Object(l.jsx)("button",{className:"btn btn-primary btn-raised mt-2",onClick:K,children:t?"Save":"Confirm"}),t?Object(l.jsxs)("span",{children:[" "," Please enter your address"]}):Object(l.jsxs)("span",{children:[" "," Please confirm your address"]})]})}(),Object(l.jsx)("h4",{children:"Got Coupon"}),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("input",{type:"text",onChange:Q,value:T,className:"form-control"}),Object(l.jsx)("button",{onClick:M,className:"btn btn-primary btn-raised mt-2",children:"Apply"})]}),_&&Object(l.jsx)("p",{className:"bg-danger p-2",children:_})]}),Object(l.jsxs)("div",{className:"col-md-6",children:[Object(l.jsx)("h4",{className:"mb-2",children:"Order Summary"}),Object(l.jsxs)("p",{children:["Products: ",O.length]}),O.map((function(t){return Object(l.jsxs)("div",{className:"row",children:[Object(l.jsxs)("p",{className:"col-md-7",children:[t.product.title," "]}),Object(l.jsxs)("p",{className:"col-md-2",children:["(",t.color," x ",t.count,")"," "]}),Object(l.jsxs)("p",{className:"col-md-1",children:["="," "]}),Object(l.jsx)("p",{className:"col-md-1",children:t.product.price*t.count})]},t._id)})),Object(l.jsxs)("p",{children:["Cart Total: ",y]}),L>0&&Object(l.jsxs)("p",{className:"bg-success p-2",children:[Object(l.jsx)("strong",{children:"Discount Applied: Total Payable: "}),"$",L]}),Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"col-md-6",children:Object(l.jsx)("button",{onClick:function(){return e.push("/payment")},disabled:!I||!O.length,style:{pointerEvents:!I||!O.length&&"none"},className:"btn btn-primary btn-raised",children:"Place Order"})}),Object(l.jsx)("div",{className:"col-md-6",children:Object(l.jsx)("button",{className:"btn btn-primary",disabled:!O.length,onClick:function(){H(Object(o.c)()),Object(p.d)(z.token).then((function(t){x([]),w(0),R(0),B(""),u.b.success("Cart is empty. Continue shopping")})).catch((function(t){return console.log(t)}))},children:"Empty Order"})})]})]})]})})}},138:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s}));var r=n(5),c=function(t){return function(e,n){e({type:r.a,payload:t}),"undefined"!==typeof window&&localStorage.setItem("cart",JSON.stringify(n().cart))}},a=function(t){return function(e,n){e({type:r.g,payload:t}),"undefined"!==typeof window&&localStorage.setItem("cart",JSON.stringify(n().cart))}},s=function(){return function(t){"undefined"!==typeof window&&localStorage.removeItem("cart"),t({type:r.c,payload:[]})}}},152:function(t,e,n){"use strict";n.d(e,"j",(function(){return o})),n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return p})),n.d(e,"i",(function(){return d})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return l})),n.d(e,"f",(function(){return b})),n.d(e,"g",(function(){return f})),n.d(e,"a",(function(){return j})),n.d(e,"h",(function(){return m}));var r=n(12),c=n.n(r),a=n(16),s=n(26),u=n.n(s),o=function(){var t=Object(a.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.post("".concat("https://tech-shop-tran.herokuapp.com/api","/user/cart"),{cart:e},{headers:{authtoken:n}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),i=function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.get("".concat("https://tech-shop-tran.herokuapp.com/api","/user/cart"),{headers:{authtoken:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.delete("".concat("https://tech-shop-tran.herokuapp.com/api","/user/cart"),{headers:{authtoken:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(a.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.post("".concat("https://tech-shop-tran.herokuapp.com/api","/user/address"),{address:n},{headers:{authtoken:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),h=function(){var t=Object(a.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.post("".concat("https://tech-shop-tran.herokuapp.com/api","/user/cart/coupon"),{name:e},{headers:{authtoken:n}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),l=function(){var t=Object(a.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.post("".concat("https://tech-shop-tran.herokuapp.com/api","/user/order"),{stripeResponse:e},{headers:{authtoken:n}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),b=function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.get("".concat("https://tech-shop-tran.herokuapp.com/api","/user/order"),{headers:{authtoken:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(a.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.get("".concat("https://tech-shop-tran.herokuapp.com/api","/user/wishlist"),{headers:{authtoken:e}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=Object(a.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.post("".concat("https://tech-shop-tran.herokuapp.com/api","/user/wishlist"),{productId:e},{headers:{authtoken:n}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),m=function(){var t=Object(a.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.a.post("".concat("https://tech-shop-tran.herokuapp.com/api","/user/wishlist/").concat(e),{},{headers:{authtoken:n}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}}]);
//# sourceMappingURL=37.ed6736df.chunk.js.map
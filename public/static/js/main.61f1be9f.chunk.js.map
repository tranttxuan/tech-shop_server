{"version":3,"sources":["firebase.js","actions/userActions.js","functions/auth.js","constants/index.js","App.js","reportWebVitals.js","reducers/cartReducer.js","reducers/index.js","reducers/userReducer.js","reducers/searchReducer.js","reducers/drawerReducer.js","reducers/couponReducer.js","store.js","index.js"],"names":["firebase","apps","length","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","googleAuthProvider","GoogleAuthProvider","signin","email","name","role","_id","token","dispatch","type","LOGGED_IN_USER","payload","signout","LOGOUT","applyCouponAction","state","COUPON_APPLIED","createOrUpdateUser","authtoken","a","axios","post","process","headers","currentUser","currentAdmin","SEARCH_QUERY","REMOVE_SEARCH_VALUE","ADD_TO_CART","REMOVE_FROM_CART","EMPTY_CART","SET_VISIBLE","PRICE_RANGE","App","useDispatch","useEffect","unsubscribe","onAuthStateChanged","user","getIdTokenResult","idTokenResult","then","res","data","catch","error","toast","message","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","window","localStorage","getItem","JSON","parse","rootReducer","combineReducers","action","search","text","cart","item","existItem","find","itemInCart","title","map","removedItem","filter","drawer","coupon","store","createStore","composeWithDevTools","applyMiddleware","thunk","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.61f1be9f.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/auth\";\n\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n    apiKey: \"AIzaSyA7xjDM3Mdj1r2De8CVwrbRnr4o3gV0Kb4\",\n    authDomain: \"react-todolist-78468.firebaseapp.com\",\n    databaseURL: \"https://react-todolist-78468-default-rtdb.europe-west1.firebasedatabase.app\",\n    projectId: \"react-todolist-78468\",\n    storageBucket: \"react-todolist-78468.appspot.com\",\n    messagingSenderId: \"895051756377\",\n    appId: \"1:895051756377:web:154073ad91197410e71248\",\n    measurementId: \"G-4PHKF7WVZM\"\n};\n\n//Initialize firebase\nif (!firebase.apps.length) {\n    firebase.initializeApp(firebaseConfig);\n}\n\n\nexport const auth = firebase.auth();\nexport const googleAuthProvider = new firebase.auth.GoogleAuthProvider();","import { COUPON_APPLIED, LOGGED_IN_USER, LOGOUT } from \"../constants\"\n\nexport const signin = (email, name, role, _id, token) => (dispatch) => {\n    dispatch({\n        type: LOGGED_IN_USER,\n        payload: {\n            email, name, role, _id, token\n        }\n    })\n};\n\nexport const signout = () => (dispatch) => {\n    dispatch({\n        type: LOGOUT,\n        payload: null\n    });\n}\n\nexport const applyCouponAction = (state) => (dispatch) => {\n    dispatch({\n        type: COUPON_APPLIED,\n        payload: state\n    });\n}","import axios from \"axios\";\n\nexport const createOrUpdateUser = async (authtoken) => {\n    return await axios.post(`${process.env.REACT_APP_API}/create-or-update-user`, {}, {\n        headers: { authtoken }\n    })\n}\n\nexport const currentUser = async (authtoken) => {\n    return await axios.post(`${process.env.REACT_APP_API}/current-user`, {}, {\n        headers: { authtoken }\n    })\n}\nexport const currentAdmin = async (authtoken) => {\n    return await axios.post(`${process.env.REACT_APP_API}/current-admin`, {}, {\n        headers: { authtoken }\n    })\n}","export const LOGGED_IN_USER = \"LOGGED_IN_USER\";\nexport const LOGOUT = 'LOGOUT';\n\nexport const SEARCH_QUERY = 'SEARCH_QUERY';\nexport const REMOVE_SEARCH_VALUE = \"REMOVE_SEARCH_VALUE\";\n\nexport const ADD_TO_CART = 'ADD_TO_CART';\nexport const REMOVE_FROM_CART = 'REMOVE_FROM_CART';\nexport const EMPTY_CART = 'EMPTY_CART';\nexport const SET_VISIBLE = 'SET_VISIBLE';\n\nexport const COUPON_APPLIED = 'COUPON_APPLIED';\n\nexport const PRICE_RANGE = [0, 5000];","import React, { lazy, Suspense, useEffect } from 'react';\nimport './App.css';\nimport { toast, ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { Route, Switch } from 'react-router';\nimport { signin } from './actions/userActions';\nimport { useDispatch } from 'react-redux';\nimport { auth } from './firebase';\nimport { currentUser } from './functions/auth';\nimport { LoadingOutlined } from '@ant-design/icons';\n\nconst Login = lazy(() => import('./pages/auth/Login'));\n\nconst Home = lazy(() => import('./pages/Home'));\nconst Register = lazy(() => import('./pages/auth/Register'));\nconst Header = lazy(() => import('./components/nav/Header'));\nconst SideDrawer = lazy(() => import('./components/drawer/SideDrawer'));\nconst RegisterComponent = lazy(() => import('./pages/auth/RegisterComponent'));\nconst ForgotPassword = lazy(() => import('./pages/auth/ForgotPassword'));\nconst History = lazy(() => import('./pages/user/History'));\nconst UseRoute = lazy(() => import('./components/routes/UseRoute'));\nconst Wishlist = lazy(() => import('./pages/user/Wishlist'));\nconst Password = lazy(() => import('./pages/user/Password'));\nconst AdminRoute = lazy(() => import('./components/routes/AdminRoute'));\nconst AdminDashboard = lazy(() => import('./pages/admin/AdminDashboard'));\nconst CategoryCreate = lazy(() => import('./pages/admin/category/CategoryCreate'));\nconst CategoryUpdate = lazy(() => import('./pages/admin/category/CategoryUpdate'));\nconst SubCreate = lazy(() => import('./pages/admin/sub/SubCreate'));\nconst SubUpdate = lazy(() => import('./pages/admin/sub/SubUpdate'));\nconst AllProducts = lazy(() => import('./pages/admin/product/AllProducts'));\nconst ProductUpdate = lazy(() => import('./pages/admin/product/ProductUpdate'));\nconst ProductCreate = lazy(() => import('./pages/admin/product/ProductCreate'));\nconst Product = lazy(() => import('./pages/Product'));\nconst CategoryPage = lazy(() => import('./pages/category/CategoryPage'));\nconst SubPage = lazy(() => import('./pages/admin/sub/SubPage'));\nconst Shop_CombinedFilters = lazy(() => import('./pages/Shop_CombinedFilters'));\nconst Cart = lazy(() => import('./pages/Cart'));\nconst Checkout = lazy(() => import('./pages/Checkout'));\nconst CreateCoupon = lazy(() => import('./pages/admin/coupon/CreateCoupon'));\nconst Payment = lazy(() => import('./pages/Payment'));\n\nfunction App() {\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        //prevent from memory leak and all that stuff\n        // Once app fetches user from firebase, it returns (cleanup) so no more calls to firebase is made.\n        // By the way firebase is realtime so it keeps track of user authStateChanged when login or logout.\n        const unsubscribe = auth.onAuthStateChanged(async (user) => {\n            if (user) {\n                const idTokenResult = await user.getIdTokenResult();\n                // use token to check auth in frontend and backend \n                currentUser(idTokenResult.token)\n                    .then(res => {\n                        const { email, name, role, _id } = res.data\n                        const token = idTokenResult.token;\n                        dispatch(signin(email, name, role, _id, token));\n                    })\n                    .catch(error => toast.error(error.message))\n            }\n        })\n        //clean up\n        return () => unsubscribe();\n    }, [dispatch])\n\n    return (\n        <div> Hello the world</div>\n        // <Suspense fallback={\n        //     <div className='col text-center p_5'>\n        //         <LoadingOutlined />  TRAN XUAN __ Project E-commerce\n        //     </div>\n        // }>\n        //     <Header />\n        //     <SideDrawer />\n        //     <ToastContainer />\n        //     <Switch>\n        //         <Route exact path=\"/\" component={Home} />\n\n        //         {/* auth routes */}\n        //         <Route exact path=\"/login\" component={Login} />\n        //         <Route exact path=\"/register\" component={Register} />\n        //         <Route exact path=\"/register/complete\" component={RegisterComponent} />\n        //         <Route exact path=\"/forgot/password\" component={ForgotPassword} />\n        //         <Route exact path=\"/login\" component={Login} />\n\n        //         {/* private routes  */}\n        //         <UseRoute exact path=\"/user/history\" component={History} />\n        //         <UseRoute exact path=\"/user/password\" component={Password} />\n        //         <UseRoute exact path=\"/user/wishlist\" component={Wishlist} />\n\n        //         {/* admin routes  */}\n        //         <AdminRoute exact path=\"/admin/dashboard\" component={AdminDashboard} />\n        //         <AdminRoute exact path=\"/admin/category\" component={CategoryCreate} />\n        //         <AdminRoute exact path=\"/admin/category/:slug\" component={CategoryUpdate} />\n        //         <AdminRoute exact path=\"/admin/sub\" component={SubCreate} />\n        //         <AdminRoute exact path=\"/admin/sub/:slug\" component={SubUpdate} />\n\n        //         <AdminRoute exact path=\"/admin/product\" component={ProductCreate} />\n        //         <AdminRoute exact path=\"/admin/product/:slug\" component={ProductUpdate} />\n        //         <AdminRoute exact path=\"/admin/products\" component={AllProducts} />\n\n        //         <AdminRoute exact path=\"/admin/coupon\" component={CreateCoupon} />\n\n        //         {/* public routes  */}\n        //         <Route exact path=\"/product/:slug\" component={Product} />\n        //         <Route exact path=\"/category/:slug\" component={CategoryPage} />\n        //         <Route exact path=\"/sub/:slug\" component={SubPage} />\n        //         {/* <Route exact path=\"/shop\" component={Shop} /> */}\n        //         <Route exact path=\"/shop\" component={Shop_CombinedFilters} />\n        //         <Route exact path=\"/cart\" component={Cart} />\n\n        //         {/* Checkout Route  */}\n        //         <UseRoute exact path=\"/checkout\" component={Checkout} />\n        //         <UseRoute exact path=\"/payment\" component={Payment} />\n        //     </Switch>\n        // </Suspense>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { ADD_TO_CART, EMPTY_CART, REMOVE_FROM_CART } from \"../constants\";\n\n//Initial state\nconst initialState = typeof window !== 'undefined'\n    ?\n    localStorage.getItem('cart')\n        ? JSON.parse(localStorage.getItem('cart'))\n        : []\n    : [];\n\nexport const cartReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case ADD_TO_CART:\n            const item = action.payload;\n            const existItem = state.find(itemInCart => itemInCart.title === item.title);\n            if (existItem) {\n                return state.map(itemInCart => itemInCart.title === existItem.title\n                    ? item\n                    : itemInCart\n                );\n            } else {\n                return [...state, item];\n            }\n        case REMOVE_FROM_CART:\n            const removedItem = action.payload;\n            return state.filter(itemInCart => itemInCart._id !== removedItem._id);\n        case EMPTY_CART:\n            return action.payload;\n        default:\n            return state;\n    }\n}\n","import { combineReducers } from \"redux\";\nimport { cartReducer } from \"./cartReducer\";\nimport { couponReducer } from \"./couponReducer\";\nimport { drawerReducer } from \"./drawerReducer\";\nimport { searchReducer } from \"./searchReducer\";\nimport { userReducer } from \"./userReducer\";\n\n\nconst rootReducer = combineReducers({\n    user: userReducer,\n    search: searchReducer,\n    cart: cartReducer,\n    drawer: drawerReducer,\n    coupon: couponReducer,\n})\n\nexport default rootReducer;","import { LOGGED_IN_USER, LOGOUT } from \"../constants\";\n\nexport const userReducer = (state = null, action) => {\n    switch (action.type) {\n        case LOGGED_IN_USER:\n            return action.payload;\n        case LOGOUT:\n            return action.payload;\n        default:\n            return state\n    }\n}","import { SEARCH_QUERY, REMOVE_SEARCH_VALUE } from \"../constants\";\n\nexport const searchReducer = (state = { text: '' }, action) => {\n    switch (action.type) {\n        case SEARCH_QUERY:\n            return action.payload;\n        case REMOVE_SEARCH_VALUE:\n            return action.payload;\n        default:\n            return state\n    }\n}","import { SET_VISIBLE } from \"../constants\";\n\nexport const drawerReducer = (state = false, action) => {\n    switch (action.type) {\n        case SET_VISIBLE:\n            return action.payload;\n        default:\n            return state\n    }\n}","import { COUPON_APPLIED } from \"../constants\";\n\nexport const couponReducer = (state = false, action) => {\n    switch (action.type) {\n        case COUPON_APPLIED:\n            return action.payload;\n        default:\n            return state\n    }\n}","import { applyMiddleware, createStore } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport rootReducer from \"./reducers\";\nimport thunk from \"redux-thunk\";\n\n//create store\nconst store = createStore(rootReducer, composeWithDevTools(applyMiddleware(thunk)));\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\nimport \"antd/dist/antd.css\"\nimport { Provider } from 'react-redux';\nimport store from './store';\n\nReactDOM.render(\n  <Provider store={store}>\n    <BrowserRouter>\n      <React.StrictMode>\n        <App />\n      </React.StrictMode>\n    </BrowserRouter>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}